# 이미지 성능 최적화

## 왜 이미지를 최적화해야 하는가?

1. 웹 페이지 바이트를 절약하여 사이트 성능을 향상 시킨다.
2. 사용자 경험 향상. 브라우저가 다운로드해야 하는 바이트를 줄이고 더 빨리 다운로드하여 렌더링 시간을 줄인다.
3. 사용자 경험은 구글 알고리즘의 영향을 끼친다. 페이지 로딩 시간은 페이지의 SEO 성능에 반영될 수 있다.
4. 웹사이트의 탄소 배출량을 줄이는 일에도 도움이 된다.

## 이미지 최적화 방법

요즘 많이 사용하는 레티나 디스플레이는 같은 공간에 더 많은 픽셀을 그릴 수 있기 때문에 너비 기준으로 두 배 정도 큰 이미지를 사용하는 게 더 적절하다. (ex. 이미지 사이즈가 120 x 120 이라면 240 x 240으로) 사용자들이 여러 기기를 사용하기 때문에 모든 기기에서 원활하고 일관된 수준의 성능을 제공해야 한다.

1. 이미지 CDN 사용
   - imgix
2. 이미지 폭 줄이기
3. 이미지 종류에 맞는 포맷 설정
   - AVIF → WebP → JPG or PNG
4. 이미지에 고정값을 준다
   - 치수가 없는 이미지들은 [Reflow](https://github.com/josubin47/TIL/blob/main/JavaScript/%EC%9B%B9%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94/Reflow%EB%9E%80.md#reflow%EB%9E%80)를 발생시켜 퍼포먼스를 저하시킨다. 이미지 및 비디오 요소에 width와 height 속성을 항상 포함하거나 CSS에서 필요한 공간 aspect-ratio를 잡는다. 이 방법을 사용하면 이미지가 로드되는 동안 브라우저가 문서의 공간을 올바르게 할당할 수 있다.
5. 브라우저가 가장 적합한 버전을 선택하도록 여러 버전의 이미지를 제공한다.
   - srcset, sizes
   - 일반적으로 3~5개를 제공하는데 성능은 향상되지만 그만큼 서버에서 더 많은 공간을 차지한다는 점…
6. 이미지 크기 조절 툴 사용
   - sharp npm package, ImageMagick, Thumbor, Cloudinary
7. CSS Image Sprite
   - 여러 개의 이미지를 하나의 이미지로 합쳐서 관리하는 이미지를 의미한다.
8. Lazy Loading
